from itertools import chain

MAX_SIZE = 4096


class Memory:
    def __init__(self) -> None:
        self.memory = bytearray(MAX_SIZE)

    def read(self, address: int) -> int:
        return self.memory[address]

    def write(self, address: int, value: int) -> None:
        self.memory[address] = 0xFF & value

    def write_bytes(self, address: int, _bytes: list[int]) -> None:
        for i in range(0, len(_bytes)):
            self.memory[address + i] = _bytes[i]

    def load_fonts(self, address: int) -> None:
        self.write_bytes(address, list(chain.from_iterable(FONTS)))


FONTS = [
    [0xF0, 0x90, 0x90, 0x90, 0xF0],  # 0
    [0x20, 0x60, 0x20, 0x20, 0x70],  # 1
    [0xF0, 0x10, 0xF0, 0x80, 0xF0],  # 2
    [0xF0, 0x10, 0xF0, 0x10, 0xF0],  # 3
    [0x90, 0x90, 0xF0, 0x10, 0x10],  # 4
    [0xF0, 0x80, 0xF0, 0x10, 0xF0],  # 5
    [0xF0, 0x80, 0xF0, 0x90, 0xF0],  # 6
    [0xF0, 0x10, 0x20, 0x40, 0x40],  # 7
    [0xF0, 0x90, 0xF0, 0x90, 0xF0],  # 8
    [0xF0, 0x90, 0xF0, 0x10, 0xF0],  # 9
    [0xF0, 0x90, 0xF0, 0x90, 0x90],  # A
    [0xE0, 0x90, 0xE0, 0x90, 0xE0],  # B
    [0xF0, 0x80, 0x80, 0x80, 0xF0],  # C
    [0xE0, 0x90, 0x90, 0x90, 0xE0],  # D
    [0xF0, 0x80, 0xF0, 0x80, 0xF0],  # E
    [0xF0, 0x80, 0xF0, 0x80, 0x80],  # F
]
